
<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <!--[if lte IE 8]>
      <script type="text/javascript">
        var tags = ['header', 'footer', 'nav', 'aside', 'article', 'section', 'object', 'main'];
        for (var i in tags) {
          document.createElement(tags[i]);
        }
      </script>
    <![endif]-->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>é˜»æ­¢æ»šåŠ¨ç©¿é€</title>
    <!-- font -->
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" />
    <!-- js -->
    <script type="text/javascript" src="/js/jquery-3.3.1.min.js"></script>
    <!-- css -->
    <link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/icon.css" />
    <link rel="stylesheet" href="/katex/katex.min.css" />
     
    <link rel="stylesheet" href="/css/index.css" />
     
  <meta name="generator" content="Hexo 5.4.1"></head>

  <body>
    <!-- header -->
    <header class="header">
  <div class="logo">
    <!-- logo -->
    <div class="logo-wrap">
      <a href="/" id="logo"></a>
    </div>
  </div>
  <nav class="nav" id="top-nav">
    <ul>
      
        <li>
          <a class="" href="/">ä¸»é¡µ</a>
        </li>
      
        <li>
          <a class="" href="/categories">åˆ†ç±»</a>
        </li>
      
        <li>
          <a class="" href="/tags">æ ‡ç­¾</a>
        </li>
      
        <li>
          <a class="" href="/archives">å½’æ¡£</a>
        </li>
      
      <!-- search -->
      
    </ul>
  </nav>
</header>


  
    <!-- main -->
    <main id="main" class="main">
      <!-- post -->

<div class="post show-toc">
  <!-- table of content -->
  
    <div class="post-toc">
      <div class="post-toc-content">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#body-scroll-lock"><span class="toc-text"> body-scroll-lock</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-text"> åŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-text"> ä»£ç </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0%E4%B8%8B%E7%9A%84%E6%BB%9A%E5%8A%A8%E7%A9%BF%E9%80%8F"><span class="toc-text"> å®šä½å…ƒç´ ä¸‹çš„æ»šåŠ¨ç©¿é€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-text"> å‚è€ƒ</span></a></li></ol>
      </div>
    </div>
  
  <!-- table of content end-->
  <!-- article -->
  <div class="cell">
    <article class="article">
      <!-- title -->
      
          <h1  class="title">é˜»æ­¢æ»šåŠ¨ç©¿é€</h1> 
      
      <div class="post-meta">
        <!-- time -->
        
          <span class="icon-baseline-query_builder-24px"></span>
          <time datetime="2019-03-31T11:00:00.000Z">
            2019-03-31
          </time>
        
        <!-- categories -->
        <!--
          <span class="icon-baseline-work_outline-24px"></span>
          
            <a href="/categories/JavaScript/">
              <span>JavaScript</span>
            </a>
          
        -->
        <!-- categories end -->
        <!-- tag -->
        <span class="icon-baseline-subtitles-24px"></span>
        
          <a href="/tags/JavaScript/">
            <span>JavaScript</span>
          </a>
        
      </div>
      <!-- content -->
      <div class="article-content">
      <p>å½“æ»šåŠ¨å…ƒç´ æ»šåŠ¨åˆ°é¡¶/åº•æ—¶, å¦‚æœå…¶å¤–å±‚è¿˜æœ‰å¯æ»šåŠ¨çš„å…ƒç´ ,åˆ™ä¼šè§¦å‘å¤–å±‚å¯æ»šåŠ¨å…ƒç´ çš„æ»šåŠ¨.<br />
<img src="/img/b3d2bfc3.gif" alt="a.gif" /></p>
<p>è¿™æ˜¯ä¸ªfeature, ä½†æœ‰æ—¶è¿™ä¸ªfeatureä¼šç»™å¼€å‘è€…å¸¦æ¥éº»çƒ¦.<br />
ç‰¹åˆ«æ˜¯safari, å¦‚æœæŸä¸ªå¯æ»šåŠ¨å…ƒç´ è®¾ç½®äº†-webkit-overflow-scrolling: touch,æ»‘åŠ¨åˆ°å¤´çš„æ—¶å€™ç»å¸¸ä¼šè¢«å¡ä½.</p>
<span id="more"></span>  
<h2 id="body-scroll-lock"><a class="markdownIt-Anchor" href="#body-scroll-lock"></a> body-scroll-lock</h2>
<p>ç”¨body-scroll-lockå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜.å½“æ»šåŠ¨åˆ°å…ƒç´ è¾¹ç•Œæ—¶,é˜»æ­¢ç»§ç»­æ»šåŠ¨.<br />
<a target="_blank" rel="noopener" href="https://github.com/willmcpo/body-scroll-lock">GitHub - willmcpo/body-scroll-lock: Body scroll locking that just works with everything ğŸ˜</a></p>
<p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="aaronbird" data-slug-hash="vMYyQg" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;" data-pen-title="vMYyQg">
  <span>See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/aaronbird/pen/vMYyQg/">
  vMYyQg</a> by aaronbird (<a target="_blank" rel="noopener" href="https://codepen.io/aaronbird">@aaronbird</a>)
  on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>
<h2 id="åŸç†"><a class="markdownIt-Anchor" href="#åŸç†"></a> åŸç†</h2>
<p>ç›‘æ§å¯æ»šåŠ¨å…ƒç´ çš„touchmoveäº‹ä»¶, åˆ¤æ–­æ‰‹æŒ‡çš„æ»‘åŠ¨æ–¹å‘å’Œå…ƒç´ çš„æ»šåŠ¨è·ç¦».<br />
å¦‚æœå…ƒç´ æ»šåŠ¨åˆ°é¡¶æ—¶ç”¨æˆ·ç»§ç»­ä¸‹æ‹‰,åˆ™å°†scrollTopé‡ç½®ä¸ºé›¶,åŒæ—¶è°ƒç”¨event.preventDefaulté˜»æ­¢é¡µé¢æ»šåŠ¨/åˆ·æ–°ç­‰é»˜è®¤åŠ¨ä½œ.<br />
å¦‚æœå…ƒç´ æ»šåŠ¨åˆ°åº•æ—¶ç”¨æˆ·ç»§ç»­ä¸Šæ»‘, åˆ™å°†scrollTopé‡ç½®ä¸ºæœ€å¤§å¯æ»šåŠ¨è·ç¦», åŒæ—¶è°ƒç”¨preventDefault.</p>
<p>æ³¨æ„: å¦‚æœå°†tochmoveäº‹ä»¶æŒ‚åœ¨window document document.bodyè¿™ä¸‰ä¸ªå…ƒç´ ä¸Š,åˆ™å¿…éœ€è®¾ç½®addEventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°çš„passiveå±æ€§ä¸ºfalse.å¦åˆ™æµè§ˆå™¨ä¼šå¿½ç•¥äº‹ä»¶å‡½æ•°ä¸­è°ƒç”¨çš„preventDefault.</p>
<h2 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> ä»£ç </h2>
<pre class="highlight"><code class="js"><span class="hljs-keyword">const</span> fixScroll = <span class="hljs-function">(<span class="hljs-params">scrollEl</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">let</span> startY
  scrollEl.addEventListener(<span class="hljs-string">'touchstart'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>&#123;
    <span class="hljs-comment">// å¦‚æœå¤šäº1æ ¹æ‰‹æŒ‡ç‚¹å‡»å±å¹•,åˆ™ä¸å¤„ç†</span>
    <span class="hljs-keyword">if</span> (event.targetTouches.length &gt; <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">return</span>
    &#125;
    <span class="hljs-comment">// å‚¨å­˜æ‰‹æŒ‡çš„åˆå§‹ä½ç½®</span>
    startY = event.targetTouches[<span class="hljs-number">0</span>].clientY
  &#125;, <span class="hljs-literal">false</span>)
  scrollEl.addEventListener(<span class="hljs-string">'touchmove'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (event.targetTouches.length &gt; <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">return</span>
    &#125;
    <span class="hljs-comment">// åˆ¤æ–­æ‰‹æŒ‡æ»‘åŠ¨æ–¹å‘, yå¤§äº0æ—¶å‘ä¸‹æ»‘åŠ¨, å°äº0æ—¶å‘ä¸Šæ»‘åŠ¨</span>
    <span class="hljs-keyword">const</span> y = event.targetTouches[<span class="hljs-number">0</span>].clientY - startY
    <span class="hljs-comment">// å¦‚æœåˆ°é¡¶æ—¶ç»§ç»­å‘ä¸‹æ‹‰</span>
    <span class="hljs-keyword">if</span> (scrollEl.scrollTop &lt;= <span class="hljs-number">0</span> &amp;&amp; y &gt; <span class="hljs-number">0</span>) &#123;
      <span class="hljs-comment">// é‡ç½®æ»šåŠ¨è·ç¦»ä¸ºæœ€å°å€¼</span>
      scrollEl.scrollTop = <span class="hljs-number">0</span>
      <span class="hljs-comment">// é˜»æ­¢æ»šåŠ¨</span>
      event.preventDefault()
    &#125;
    <span class="hljs-comment">// å¦‚æœåˆ°åº•æ—¶ç»§ç»­ä¸Šæ»‘  </span>
    <span class="hljs-keyword">const</span> maxScrollTop = scrollEl.scrollHeight - scrollEl.clientHeight
    <span class="hljs-keyword">if</span> (maxScrollTop - scrollEl.scrollTop &lt;= <span class="hljs-number">0</span> &amp;&amp; y &lt; <span class="hljs-number">0</span>) &#123;
      scrollEl.scrollTop = maxScrollTop
      event.preventDefault()
    &#125;
  &#125;, &#123;
    <span class="hljs-attr">passive</span>: <span class="hljs-literal">false</span>
  &#125;)
&#125;
</code></pre>
<p class="codepen" data-height="265" data-theme-id="0" data-default-tab="js,result" data-user="aaronbird" data-slug-hash="PgobLO" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;" data-pen-title="fix scroll ä¾‹å­">
  <span>See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/aaronbird/pen/PgobLO/">
  fix scroll ä¾‹å­</a> by aaronbird (<a target="_blank" rel="noopener" href="https://codepen.io/aaronbird">@aaronbird</a>)
  on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>
<h2 id="å®šä½å…ƒç´ ä¸‹çš„æ»šåŠ¨ç©¿é€"><a class="markdownIt-Anchor" href="#å®šä½å…ƒç´ ä¸‹çš„æ»šåŠ¨ç©¿é€"></a> å®šä½å…ƒç´ ä¸‹çš„æ»šåŠ¨ç©¿é€</h2>
<p>å¦‚æœå®šä½å…ƒç´ ä¸‹æœ‰æ»šåŠ¨å…ƒç´ ,ä¹Ÿä¼šå‘ç”Ÿæ»šåŠ¨ç©¿é€ç°è±¡.<br />
<img src="/img/a03413c5.gif" alt="1.gif" /><br />
å¦‚ä¸Šå›¾æ‰€ç¤º, åŠé€æ˜çš„ä¸Šå±‚å…ƒç´ æ˜¯ä¸€ä¸ªfixedå…ƒç´ .å³ä½¿åœ¨è§¦å‘touchmoveäº‹ä»¶æ—¶è°ƒç”¨event.stopPropagation,ä¹Ÿä¸èƒ½é˜»æ­¢æ»šåŠ¨ç©¿é€.</p>
<p>å¦å¤–è¦æ³¨æ„,å³ä¾¿ç”¨äº†fixScrollå‡½æ•°, ä¹Ÿå¿…é¡»åœ¨touchmoveäº‹ä»¶ä¸­è°ƒç”¨event.stopPropagation.å¦è€…æ»‘åˆ°åº•æ—¶ä¼šå¡ä½.<br />
<img src="/img/b923efbe.gif" alt="1.gif" /></p>
<p>åŸå› æ˜¯touchmoveäº‹ä»¶ç©¿é€åˆ°ä¸‹å±‚å»äº†<br />
<img src="/img/ec3b62ca.PNG" alt="2.PNG" /></p>
<h2 id="å‚è€ƒ"><a class="markdownIt-Anchor" href="#å‚è€ƒ"></a> å‚è€ƒ</h2>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/41594997/ios-10-safari-prevent-scrolling-behind-a-fixed-overlay-and-maintain-scroll-posi">javascript - iOS 10 Safari: Prevent scrolling behind a fixed overlay and maintain scroll position - Stack Overflow</a><br />
<a target="_blank" rel="noopener" href="https://xiaoiver.github.io/coding/2018/05/20/%E5%9C%A8-iOS-%E4%B8%8B%E4%BD%BF%E7%94%A8-iframe-%E7%9A%84%E7%A7%8D%E7%A7%8D%E9%97%AE%E9%A2%98.html">åœ¨ iOS ä¸‹ä½¿ç”¨ iframe çš„ç§ç§é—®é¢˜ - xiaOpçš„åšå®¢</a></p>

      </div>
    </article>
  </div>
  <!-- pagination -->
  
    <nav class="pagination">
      
        <a class="prev" href="/article/(Safari%E5%85%BC%E5%AE%B9)overflow%E5%92%8Coverflow-scrolling%E5%AF%BC%E8%87%B4fixed%E5%85%83%E7%B4%A0%E4%B8%8D%E6%98%BE%E7%A4%BA/">&lt;  (Safariå…¼å®¹)overflowå’Œoverflow-scrollingå¯¼è‡´fixedå…ƒç´ ä¸æ˜¾ç¤º</a>
      
      
        <a class="next" href="/article/(%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C)%E8%B7%9F%E9%9A%8F%E4%B8%8B%E6%8B%89%E6%94%BE%E5%A4%A7%E5%9B%BE%E5%83%8F/">(åŠ¨ç”»æ•ˆæœ)è·Ÿéšä¸‹æ‹‰æ”¾å¤§å›¾åƒ  &gt;</a>
      
    </nav>    
  
  <!-- pagination end -->
</div>






    </main>

    <!-- search -->
     
    
    <script src="/js/main.js"></script>
     
  </body>
</html>
