
<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <!--[if lte IE 8]>
      <script type="text/javascript">
        var tags = ['header', 'footer', 'nav', 'aside', 'article', 'section', 'object', 'main'];
        for (var i in tags) {
          document.createElement(tags[i]);
        }
      </script>
    <![endif]-->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Three.js入门</title>
    <!-- font -->
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" />
    <!-- js -->
    <script type="text/javascript" src="/js/jquery-3.3.1.min.js"></script>
    <!-- css -->
    <link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/icon.css" />
    <link rel="stylesheet" href="/katex/katex.min.css" />
     
    <link rel="stylesheet" href="/css/index.css" />
     
  <meta name="generator" content="Hexo 5.4.1"></head>

  <body>
    <!-- header -->
    <header class="header">
  <div class="logo">
    <!-- logo -->
    <div class="logo-wrap">
      <a href="/" id="logo"></a>
    </div>
  </div>
  <nav class="nav" id="top-nav">
    <ul>
      
        <li>
          <a class="" href="/">主页</a>
        </li>
      
        <li>
          <a class="" href="/categories">分类</a>
        </li>
      
        <li>
          <a class="" href="/tags">标签</a>
        </li>
      
        <li>
          <a class="" href="/archives">归档</a>
        </li>
      
      <!-- search -->
      
    </ul>
  </nav>
</header>


  
    <!-- main -->
    <main id="main" class="main">
      <!-- post -->

<div class="post show-toc">
  <!-- table of content -->
  
    <div class="post-toc">
      <div class="post-toc-content">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9F%E6%9F%A5%E8%A1%A8"><span class="toc-text"> 速查表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-text"> 参考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5threejs"><span class="toc-text"> 导入Three.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E5%99%A8renderer"><span class="toc-text"> 渲染器(Renderer)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%B8%B2%E6%9F%93%E5%99%A8"><span class="toc-text"> 创建渲染器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7"><span class="toc-text"> 常用属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#domelement-%E6%B8%B2%E6%9F%93%E5%99%A8%E7%94%BB%E5%B8%83"><span class="toc-text"> domElement 渲染器画布</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#shadowmap-%E9%98%B4%E5%BD%B1"><span class="toc-text"> shadowMap 阴影</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text"> 常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#getsize-%E8%8E%B7%E5%8F%96%E6%B8%B2%E6%9F%93%E5%99%A8%E5%B0%BA%E5%AF%B8"><span class="toc-text"> getSize 获取渲染器尺寸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setsize-%E8%AE%BE%E7%BD%AE%E6%B8%B2%E6%9F%93%E5%99%A8%E5%B0%BA%E5%AF%B8"><span class="toc-text"> setSize 设置渲染器尺寸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#getclearcolor-%E8%8E%B7%E5%8F%96%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2"><span class="toc-text"> getClearColor 获取背景颜色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setclearcolor-%E8%AE%BE%E7%BD%AE%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2"><span class="toc-text"> setClearColor 设置背景颜色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setpixelratio-%E8%AE%BE%E7%BD%AE%E8%AE%BE%E5%A4%87%E5%83%8F%E7%B4%A0%E6%AF%94%E4%BE%8B"><span class="toc-text"> setPixelRatio 设置设备像素比例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#render-%E6%B8%B2%E6%9F%93%E7%94%BB%E5%B8%83"><span class="toc-text"> render 渲染画布</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%BA%E6%99%AFscene"><span class="toc-text"> 场景(Scene)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%9C%BA%E6%99%AF"><span class="toc-text"> 创建场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7-2"><span class="toc-text"> 常用属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#fog-%E9%9B%BE"><span class="toc-text"> fog 雾</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E6%9C%BAcamera"><span class="toc-text"> 相机(Camera)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E4%BA%A4%E6%8A%95%E5%BD%B1%E7%9B%B8%E6%9C%BA"><span class="toc-text"> 正交投影相机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%8F%E8%A7%86%E6%8A%95%E5%BD%B1%E7%9B%B8%E6%9C%BAperspectivecamera"><span class="toc-text"> 透视投影相机(PerspectiveCamera)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7"><span class="toc-text"> 属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zoom"><span class="toc-text"> zoom</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AC%E5%85%B1%E5%B1%9E%E6%80%A7"><span class="toc-text"> 公共属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#position-%E8%AE%BE%E7%BD%AE%E7%9B%B8%E6%9C%BA%E4%BD%8D%E7%BD%AE"><span class="toc-text"> position 设置相机位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lookat-%E8%AE%BE%E7%BD%AE%E7%9B%B8%E6%9C%BA%E6%8C%87%E5%90%91"><span class="toc-text"> lookAt 设置相机指向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%81%AF%E5%85%89light"><span class="toc-text"> 灯光(Light)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%85%89"><span class="toc-text"> 环境光</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%85%89"><span class="toc-text"> 点光</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B3%E8%A1%8C%E5%85%89"><span class="toc-text"> 平行光</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%9A%E5%85%89%E7%81%AF"><span class="toc-text"> 聚光灯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B4%E5%BD%B1"><span class="toc-text"> 阴影</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%A0%E4%BD%95%E5%9B%BE%E5%BD%A2geometry"><span class="toc-text"> 几何图形(Geometry)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%95%BF%E6%96%B9%E5%BD%A2"><span class="toc-text"> 长方形</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%BE%B9%E5%BD%A2"><span class="toc-text"> 多边形</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%86%E7%8E%AF"><span class="toc-text"> 圆环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%95%BF%E6%96%B9%E4%BD%93"><span class="toc-text"> 长方体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%90%83"><span class="toc-text"> 球</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%B1%E4%BD%93"><span class="toc-text"> 柱体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%9B%9B%E9%9D%A2%E4%BD%93"><span class="toc-text"> 正四面体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%86%E7%8E%AF-2"><span class="toc-text"> 圆环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E4%BD%93"><span class="toc-text"> 字体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%90%E8%B4%A8basicmaterial"><span class="toc-text"> 材质(BasicMaterial)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#meshbasicmaterial-%E5%B9%B3%E9%9D%A2%E6%9D%90%E8%B4%A8"><span class="toc-text"> MeshBasicMaterial 平面材质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#meshlambertmaterial-%E6%97%A0%E5%85%89%E6%B3%BD%E6%9D%90%E8%B4%A8"><span class="toc-text"> MeshLambertMaterial 无光泽材质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#meshphongmaterial-%E6%9C%89%E5%85%89%E6%B3%BD%E8%A1%A8%E9%9D%A2"><span class="toc-text"> MeshPhongMaterial 有光泽表面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#meshnormalmaterial-%E6%B3%95%E7%9B%B8%E6%9D%90%E8%B4%A8"><span class="toc-text"> MeshNormalMaterial 法相材质</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%B4%E5%9B%BE"><span class="toc-text"> 贴图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%BD%E5%85%A5%E8%B4%B4%E5%9B%BE"><span class="toc-text"> 载入贴图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%BD%E5%85%A5%E5%A4%9A%E5%BC%A0%E8%B4%B4%E5%9B%BE"><span class="toc-text"> 载入多张贴图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wraps"><span class="toc-text"> wrapS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wrapt"><span class="toc-text"> wrapT</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mesh-%E7%BD%91%E6%A0%BC"><span class="toc-text"> Mesh 网格</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#meshposition"><span class="toc-text"> mesh.position</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scale"><span class="toc-text"> scale</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rotation"><span class="toc-text"> rotation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB"><span class="toc-text"> 动画</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#windowsetinterval"><span class="toc-text"> window.setInterval()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#windowrequestanimationframe"><span class="toc-text"> window.requestAnimationFrame()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%85%E5%8A%A9%E6%8F%92%E4%BB%B6"><span class="toc-text"> 辅助插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#orbitcontrolsjs-%E8%87%AA%E7%94%B1%E8%A7%86%E8%A7%92"><span class="toc-text"> OrbitControls.js 自由视角</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#statjs-%E6%98%BE%E7%A4%BAfps"><span class="toc-text"> stat.js 显示FPS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reflectorjs-%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84"><span class="toc-text"> Reflector.js 镜面反射</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%E5%BD%95"><span class="toc-text"> 附录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%B2%E4%B8%8D%E8%A2%AB%E8%B5%9E%E6%88%90%E4%BD%BF%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0%E5%8F%8A%E4%BB%A3%E6%9B%BF%E5%93%81"><span class="toc-text"> 已不被赞成使用的函数及代替品</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%B2%E4%B8%8D%E8%B5%9E%E6%88%90%E4%BD%BF%E7%94%A8%E8%A2%AB%E7%A7%BB%E9%99%A4%E7%9A%84%E6%8F%92%E4%BB%B6%E5%8F%8A%E4%BB%A3%E6%9B%BF%E5%93%81"><span class="toc-text"> 已不赞成使用&#x2F;被移除的插件及代替品</span></a></li></ol></li></ol>
      </div>
    </div>
  
  <!-- table of content end-->
  <!-- article -->
  <div class="cell">
    <article class="article">
      <!-- title -->
      
          <h1  class="title">Three.js入门</h1> 
      
      <div class="post-meta">
        <!-- time -->
        
          <span class="icon-baseline-query_builder-24px"></span>
          <time datetime="2017-12-24T12:45:00.000Z">
            2017-12-24
          </time>
        
        <!-- categories -->
        <!--
          <span class="icon-baseline-work_outline-24px"></span>
          
            <a href="/categories/JavaScript-library/">
              <span>JavaScript library</span>
            </a>
          
        -->
        <!-- categories end -->
        <!-- tag -->
        <span class="icon-baseline-subtitles-24px"></span>
        
          <a href="/tags/JavaScript/">
            <span>JavaScript</span>
          </a>
        
          <a href="/tags/JavaScript-library/">
            <span>JavaScript library</span>
          </a>
        
          <a href="/tags/three-js/">
            <span>three.js</span>
          </a>
        
          <a href="/tags/WebGL/">
            <span>WebGL</span>
          </a>
        
          <a href="/tags/HTML5/">
            <span>HTML5</span>
          </a>
        
          <a href="/tags/Canvas/">
            <span>Canvas</span>
          </a>
        
      </div>
      <!-- content -->
      <div class="article-content">
      <script type="text/javascript" src="/js/three.js"></script>
<script type="text/javascript" src="/js/OrbitControls.js"></script>
<style>
canvas {
    width:200px;
    height:200px;
}
</style>
<script>
var creExp = function(eleSel,shape) {
    // the function will render a shape in canvas element
    // eleSel: css selector,used to select canvas objcet,like: document.querySelector('canvas')
    // shape: three shape object,like: new THREE.SphereGeometry(1)
    
    var element = document.querySelector(eleSel)
    var renderer = new THREE.WebGLRenderer({
        antialias: true,
        alpha:true,
        //canvas: document.querySelector("canvas"),
        canvas: element, 
    });
    renderer.setSize(element.clientWidth, element.clientHeight)
    renderer.setClearColor(0xffffff,0);
    var loader = new THREE.FontLoader();

    var scene = new THREE.Scene();
    var camera = new THREE.OrthographicCamera(-2, 2, 2, -2, 0, 10);
    camera.position.set(0, 0, 3);
    camera.lookAt(new THREE.Vector3(0, 0, 0));
    scene.add(camera);
    var cube = new THREE.Mesh(shape,
        new THREE.MeshBasicMaterial({
            color: 0x555555,
            wireframe: true
        })
    );
    scene.add(cube);

    var controls = new THREE.OrbitControls(camera,element);

    function animate() {
        requestAnimationFrame(animate);
        controls.update();
        renderer.render(scene, camera);
    }
    animate();
    renderer.render(scene, camera);
};

</script>
<h2 id="速查表"><a class="markdownIt-Anchor" href="#速查表"></a> 速查表</h2>
<p><img src="/img/THREE.png" alt="" /></p>
<h2 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h2>
<p><a target="_blank" rel="noopener" href="http://www.ituring.com.cn/book/1272">Three.js入门指南</a><br />
<a target="_blank" rel="noopener" href="https://www.qcloud.com/community/article/376875">Three.js 粒子系统学习小记</a><br />
<a target="_blank" rel="noopener" href="https://threejs.org/docs/">官方文档</a></p>
<h2 id="导入threejs"><a class="markdownIt-Anchor" href="#导入threejs"></a> 导入Three.js</h2>
<pre><code>&lt;script type=&quot;text/javascript&quot; src=&quot;three.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>Three.js把所有属性和方法都封装在THREE对象中,类似于jQuery的$</p>
<h2 id="渲染器renderer"><a class="markdownIt-Anchor" href="#渲染器renderer"></a> 渲染器(Renderer)</h2>
<h3 id="创建渲染器"><a class="markdownIt-Anchor" href="#创建渲染器"></a> 创建渲染器</h3>
<p>THREE.WebGLRenderer(parameter)</p>
<ul>
<li>parameter 包含一组渲染器参数的对象(可选)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>();</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>(&#123;</span><br><span class="line">    <span class="attr">canvas</span>: <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>渲染器有以下常用参数</p>
<ul>
<li>canvas 渲染器画布,对应domElement</li>
<li>precision: 'highp'|'mediump'|'lowp' 着色器精度</li>
<li>alpha 是否开启透明缓冲.布尔值,默认值为false</li>
<li>antialias 是否开启抗锯齿.布尔值,默认值为false</li>
</ul>
<h3 id="常用属性"><a class="markdownIt-Anchor" href="#常用属性"></a> 常用属性</h3>
<h4 id="domelement-渲染器画布"><a class="markdownIt-Anchor" href="#domelement-渲染器画布"></a> domElement 渲染器画布</h4>
<p>renderer.domElement<br />
渲染器画布对象.如果创建渲染器时未指定canvas参数,则由构造函数自动创建.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>();</span><br><span class="line"><span class="comment">// 获取画布</span></span><br><span class="line"><span class="keyword">var</span> canvas = renderer.<span class="property">domElement</span>;</span><br><span class="line"><span class="comment">// 添加画布到body元素中</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(canvas);</span><br></pre></td></tr></table></figure>
<h4 id="shadowmap-阴影"><a class="markdownIt-Anchor" href="#shadowmap-阴影"></a> shadowMap 阴影</h4>
<p>shadowMap.enabled<br />
是否渲染阴影.布尔值.默认值为false</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renderer.<span class="property">shadowMap</span>.<span class="property">enabled</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>shadowMap.type<br />
阴影渲染方式,默认值为THREE.PCFShadowMap</p>
<ul>
<li>HREE.BasicShadowMap 未过滤阴影.生成速度快,质量低</li>
<li>THREE.PCFShadowMap 使用Percentage-Closer Filtering (PCF)算法生成阴影</li>
<li>THREE.PCFSoftShadowMap 使用Percentage-Closer Soft Shadows (PCSS)算法生成阴影,阴影边缘带有虚化效果</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renderer.<span class="property">shadowMap</span>.<span class="property">type</span> = <span class="variable constant_">THREE</span>.<span class="property">PCFSoftShadowMap</span>;</span><br></pre></td></tr></table></figure>
<h3 id="常用方法"><a class="markdownIt-Anchor" href="#常用方法"></a> 常用方法</h3>
<h4 id="getsize-获取渲染器尺寸"><a class="markdownIt-Anchor" href="#getsize-获取渲染器尺寸"></a> getSize 获取渲染器尺寸</h4>
<p>getSize()<br />
返回一个对象,包含渲染器画布的宽度和高度</p>
<h4 id="setsize-设置渲染器尺寸"><a class="markdownIt-Anchor" href="#setsize-设置渲染器尺寸"></a> setSize 设置渲染器尺寸</h4>
<p>setSize ( width, height, updateStyle )</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renderer.<span class="title function_">setSize</span>(<span class="number">400</span>,<span class="number">400</span>);</span><br></pre></td></tr></table></figure>
<p>注意 渲染器画布尺寸要和canvas大小相匹配,否则渲染出来的图像可能会变形/发虚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ele = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ele.<span class="property">clientWidth</span>, ele.<span class="property">clientHeight</span>); <span class="comment">// 500 500</span></span><br><span class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>(&#123;</span><br><span class="line">    <span class="attr">canvas</span>: ele;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 渲染器尺寸比canvas尺寸要小,导致渲染出来的图形模糊不清</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(renderer.<span class="title function_">getSize</span>()) <span class="comment">// &#123;width: 300, height: 150&#125; </span></span><br><span class="line"><span class="comment">// 调整渲染器尺寸</span></span><br><span class="line">renderer.<span class="title function_">setSize</span>(ele.<span class="property">clientWidth</span>,ele.<span class="property">clientHeight</span>);</span><br></pre></td></tr></table></figure>
<h4 id="getclearcolor-获取背景颜色"><a class="markdownIt-Anchor" href="#getclearcolor-获取背景颜色"></a> getClearColor 获取背景颜色</h4>
<p>getClearColor()<br />
返回当前的THREE.color实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renderer.<span class="title function_">getClearColor</span>(); <span class="comment">// Color &#123;r: 1, g: 1, b: 0&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="setclearcolor-设置背景颜色"><a class="markdownIt-Anchor" href="#setclearcolor-设置背景颜色"></a> setClearColor 设置背景颜色</h4>
<p>setClearColor ( color, alpha )</p>
<ul>
<li>color 颜色</li>
<li>alpha 透明度,需在创建渲染器时设置alpha: true</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 黑色背景</span></span><br><span class="line">renderer.<span class="title function_">setClearColor</span>(<span class="number">0x000000</span>)</span><br><span class="line"><span class="comment">// 黄色背景</span></span><br><span class="line">renderer.<span class="title function_">setClearColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line"><span class="comment">// 透明背景</span></span><br><span class="line">renderer.<span class="title function_">setClearColor</span>(<span class="number">0x000000</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="setpixelratio-设置设备像素比例"><a class="markdownIt-Anchor" href="#setpixelratio-设置设备像素比例"></a> setPixelRatio 设置设备像素比例</h4>
<p>setPixelRatio ( value )<br />
常用于适配视网膜屏幕,防止输出到画布的图像模糊</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renderer.<span class="title function_">setPixelRatio</span>(<span class="variable language_">window</span>.<span class="property">devicePixelRatio</span>);</span><br></pre></td></tr></table></figure>
<h4 id="render-渲染画布"><a class="markdownIt-Anchor" href="#render-渲染画布"></a> render 渲染画布</h4>
<p>render( scene, camera, renderTarget, forceClear)</p>
<ul>
<li>scene 场景对象</li>
<li>camera 照相机对象</li>
<li>renderTarget 将渲染结果缓存在RenderTarget对象中</li>
<li>forceClear</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建场景</span></span><br><span class="line"><span class="keyword">var</span> scene = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Scene</span>();</span><br><span class="line"><span class="comment">// 创建相机</span></span><br><span class="line"><span class="keyword">var</span> camera = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">OrthographicCamera</span>(-<span class="number">1000</span>, <span class="number">1000</span>, <span class="number">1000</span>, -<span class="number">1000</span>, <span class="number">1</span>, <span class="number">2000</span>);</span><br><span class="line"><span class="comment">// 添加相机到场景中</span></span><br><span class="line">scene.<span class="title function_">add</span>(camera);</span><br><span class="line">renderer.<span class="title function_">render</span>(scene, camera);</span><br></pre></td></tr></table></figure>
<h2 id="场景scene"><a class="markdownIt-Anchor" href="#场景scene"></a> 场景(Scene)</h2>
<p>用于放置物体/灯光/照相机</p>
<h3 id="创建场景"><a class="markdownIt-Anchor" href="#创建场景"></a> 创建场景</h3>
<p>THREE.Scene()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scene = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Scene</span>();</span><br></pre></td></tr></table></figure>
<h3 id="常用属性-2"><a class="markdownIt-Anchor" href="#常用属性-2"></a> 常用属性</h3>
<h4 id="fog-雾"><a class="markdownIt-Anchor" href="#fog-雾"></a> fog 雾</h4>
<p>定义应用于场景中雾的类型,默认值为null</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scene.<span class="property">fog</span> = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Fog</span>(<span class="string">&#x27;#ff0000&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="相机camera"><a class="markdownIt-Anchor" href="#相机camera"></a> 相机(Camera)</h2>
<p>相机的横纵比应于画布一致,否则会导致物体变形.在相机范围外的物体不会被显示</p>
<p>PerspectiveCamera 透视投影相机 模拟人眼所见的透视比例,常用于渲染3D物体<br />
OrthographicCamera 正交投影相机.物体大小与照相机距离无关,常用于2D/UI的渲染</p>
<h3 id="正交投影相机"><a class="markdownIt-Anchor" href="#正交投影相机"></a> 正交投影相机</h3>
<p>THREE.OrthographicCamera(left, right, top, bottom, near, far);</p>
<ul>
<li>near 最近可视范围</li>
<li>far 最远可视范围</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">var</span> height = <span class="number">1000</span>;</span><br><span class="line"><span class="comment">// 创建正交投影相机</span></span><br><span class="line"><span class="keyword">var</span> camera = <span class="variable constant_">THREE</span>.<span class="title class_">OrthographicCamera</span>(width / -<span class="number">2</span>, width / <span class="number">2</span>, height / <span class="number">2</span>, height / -<span class="number">2</span>, <span class="number">1</span>, <span class="number">1000</span>);</span><br><span class="line"><span class="comment">// 把相机放入场景</span></span><br><span class="line">scene.<span class="title function_">add</span>(camear);</span><br></pre></td></tr></table></figure>
<h3 id="透视投影相机perspectivecamera"><a class="markdownIt-Anchor" href="#透视投影相机perspectivecamera"></a> 透视投影相机(PerspectiveCamera)</h3>
<p>PerspectiveCamera( fov, aspect, near, far )</p>
<ul>
<li>fov 垂直方向张角</li>
<li>aspect 相机横纵比</li>
<li>near 最近可视距离</li>
<li>far 最远可视距离</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> camera = <span class="variable constant_">HTREE</span>.<span class="title class_">PerspectiveCamera</span>(<span class="number">45</span>, width / height, <span class="number">1</span>, <span class="number">1000</span>);</span><br><span class="line">scene.<span class="title function_">add</span>(camera);</span><br></pre></td></tr></table></figure>
<h4 id="属性"><a class="markdownIt-Anchor" href="#属性"></a> 属性</h4>
<h4 id="zoom"><a class="markdownIt-Anchor" href="#zoom"></a> zoom</h4>
<p>等比放大/缩小相机,默认值为1</p>
<h3 id="公共属性"><a class="markdownIt-Anchor" href="#公共属性"></a> 公共属性</h3>
<p>大多数属性更新后需调用updateProjectionMatrix方法使更改生效</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">camera.<span class="title function_">updateProjectionMatrix</span>();</span><br></pre></td></tr></table></figure>
<h3 id="position-设置相机位置"><a class="markdownIt-Anchor" href="#position-设置相机位置"></a> position 设置相机位置</h3>
<p>camera.position.set(x, y, z)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">camera.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<h3 id="lookat-设置相机指向"><a class="markdownIt-Anchor" href="#lookat-设置相机指向"></a> lookAt 设置相机指向</h3>
<p>camera.lookAt(x, y, z)<br />
camera.lookAt(new THREE.Vector3(x, y, z))</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">camera =  <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">OrthographicCamera</span>(-<span class="number">5</span>, <span class="number">5</span>, -<span class="number">5</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line">camera.<span class="property">lookAt</span>.<span class="title function_">set</span>(<span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Vector3</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</span><br></pre></td></tr></table></figure>
<h2 id="灯光light"><a class="markdownIt-Anchor" href="#灯光light"></a> 灯光(Light)</h2>
<h3 id="环境光"><a class="markdownIt-Anchor" href="#环境光"></a> 环境光</h3>
<p>用来照亮场景中的所有物体.没有方向,因此不能生成投影<br />
THREE.AmbientLight( color, intensity )</p>
<ul>
<li>color 颜色</li>
<li>intensity 光照强度</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// soft white light</span></span><br><span class="line"><span class="keyword">var</span> light = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">AmbientLight</span>( <span class="number">0x404040</span> );</span><br><span class="line">scene.<span class="title function_">add</span>( light );</span><br></pre></td></tr></table></figure>
<h3 id="点光"><a class="markdownIt-Anchor" href="#点光"></a> 点光</h3>
<p>从单个点发出的光线,光线呈线性衰减.物体距离越远,光线越暗<br />
可生成阴影<br />
PointLight( color, intensity, distance, decay )</p>
<ul>
<li>color 光线颜色</li>
<li>intensity 光照强度,默认值为1</li>
<li>distance 光线能照射到的最远距离,为零时距离无限长.默认值为0</li>
<li>decay 光线衰减程度,默认值为1</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> light = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">PointLight</span>( <span class="number">0xffffff</span>);</span><br><span class="line">light.<span class="property">position</span>.<span class="title function_">set</span>( <span class="number">20</span>, <span class="number">30</span>, <span class="number">50</span> );</span><br><span class="line">scene.<span class="title function_">add</span>(light);</span><br></pre></td></tr></table></figure>
<h3 id="平行光"><a class="markdownIt-Anchor" href="#平行光"></a> 平行光</h3>
<p>从特定方向上发出的光,距离物体无限远.常用作模拟太阳光<br />
可生成阴影<br />
DirectionalLight( color, intensity )</p>
<ul>
<li>color 光线颜色</li>
<li>intensity 光照强度,默认值为1</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> light = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">DirectionalLight</span>( <span class="number">0xffffff</span>);</span><br><span class="line">light.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">50</span>);</span><br><span class="line">scene.<span class="title function_">add</span>(light);</span><br></pre></td></tr></table></figure>
<p>修改光线指向</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> light = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">DirectionalLight</span>( <span class="number">0xffffff</span>);</span><br><span class="line">light.<span class="property">target</span>.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">100</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">scene.<span class="title function_">add</span>(light);</span><br><span class="line"><span class="comment">// 如果targe.position被改变,需将target加入场景</span></span><br><span class="line">scene.<span class="title function_">add</span>(light.<span class="property">target</span>);</span><br></pre></td></tr></table></figure>
<h3 id="聚光灯"><a class="markdownIt-Anchor" href="#聚光灯"></a> 聚光灯</h3>
<p>从一点发出,总体近似一个圆锥形<br />
可生成阴影<br />
SpotLight( color, intensity, distance, angle, penumbra, decay )</p>
<ul>
<li>color</li>
<li>intensity 光照强度</li>
<li>distance 光照范围最远距离</li>
<li>angle 光线最大角度,最大值为Math.PI * 2</li>
<li>penumbra</li>
<li>decay</li>
</ul>
<p>修改光线指向</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> light = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">SpotLight</span>( <span class="number">0xffffff</span>);</span><br><span class="line">light.<span class="property">target</span>.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">100</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">scene.<span class="title function_">add</span>(light, light.<span class="property">target</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以把目标指向某一物体,使聚光灯自动跟踪目标</span></span><br><span class="line"><span class="keyword">var</span> shape = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CubeGeometry</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">var</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshLambertMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="number">0xffff00</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> cube = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(shape, material);</span><br><span class="line">light.<span class="property">target</span> = cube;</span><br></pre></td></tr></table></figure>
<h3 id="阴影"><a class="markdownIt-Anchor" href="#阴影"></a> 阴影</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> renderer = <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>();</span><br><span class="line"><span class="keyword">var</span> scene = <span class="variable constant_">THREE</span>.<span class="title class_">Scene</span>();</span><br><span class="line"><span class="comment">// 开启阴影</span></span><br><span class="line">renderer.<span class="property">shadowMapEnabled</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// 设置阴影渲染方式</span></span><br><span class="line">renderer.<span class="property">shadowMap</span>.<span class="property">type</span> = <span class="variable constant_">THREE</span>.<span class="property">PCFSoftShadowMap</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> light = <span class="keyword">var</span> <span class="title class_">SpotLight</span>(<span class="number">0xffffff</span>);</span><br><span class="line"><span class="comment">// 投射投影</span></span><br><span class="line">light.<span class="property">castShadow</span> = <span class="literal">true</span>;</span><br><span class="line">light.<span class="property">shadowCameraVisible</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// 显示光源位置</span></span><br><span class="line"><span class="keyword">var</span> helper = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CameraHelper</span>(light.<span class="property">shadow</span>.<span class="property">camera</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> shape = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CubeGeometry</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">var</span> cube = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(shape, material);</span><br><span class="line"><span class="comment">// 投射投影</span></span><br><span class="line">cube.<span class="property">castShadow</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> shape1 = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CubeGeometry</span>(<span class="number">500</span>, <span class="number">1</span>, <span class="number">500</span>);</span><br><span class="line"><span class="keyword">var</span> cube = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(shape1, material);</span><br><span class="line">shape.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">0</span>,-<span class="number">200</span>,<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 接收投影</span></span><br><span class="line">cube.<span class="property">receiveShadow</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">scene.<span class="title function_">add</span>(light, shape, shape1, helper);</span><br></pre></td></tr></table></figure>
<h2 id="几何图形geometry"><a class="markdownIt-Anchor" href="#几何图形geometry"></a> 几何图形(Geometry)</h2>
<h3 id="长方形"><a class="markdownIt-Anchor" href="#长方形"></a> 长方形</h3>
<p>new THREE.PlaneGeometry(width, height, widthSegments, heightSegments)</p>
<ul>
<li>widthSegments 长度分段数(默认值为1)</li>
<li>heightSegments 高度分段数(默认值为1)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">PlaneGeometry</span>( <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/img/threeSegment.PNG" alt="" /></p>
<h3 id="多边形"><a class="markdownIt-Anchor" href="#多边形"></a> 多边形</h3>
<p>THREE.CircleGeometry(radius, segments, thetaStart, thetaLength)</p>
<ul>
<li>radius 半径</li>
<li>segments 分割数</li>
<li>thetaStart 起始度数</li>
<li>thetaLength 度数跨度</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CircleGeometry</span>(<span class="number">1.5</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="cir-3"></canvas></p>
<script>creExp('.cir-3', new THREE.CircleGeometry(1.5, 4, 0, Math.PI / 2))</script>
<h3 id="圆环"><a class="markdownIt-Anchor" href="#圆环"></a> 圆环</h3>
<p>new THREE.RingGeometry(innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength)</p>
<ul>
<li>innerRadius 内半径</li>
<li>outerRadius 外半径</li>
<li>thetaSegments 段数</li>
<li>phiSegments</li>
<li>thetaStart 初始角度</li>
<li>thetaLength 中心角度</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">RingGeometry</span>(<span class="number">0.7</span>, <span class="number">1.5</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="title class_">Math</span>.<span class="property">PI</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="rin-1"></canvas></p>
<script>creExp('.rin-1', new THREE.RingGeometry(0.7, 1.5, 6, 3, Math.PI))</script>
<h3 id="长方体"><a class="markdownIt-Anchor" href="#长方体"></a> 长方体</h3>
<p>new THREE.CubeGeometry(width, height, depth, widthSegments, heightSegments, depthSegments)</p>
<ul>
<li>width 长</li>
<li>height 高</li>
<li>depath 宽</li>
<li>widthSegments 长度分段数(默认值为1)</li>
<li>heightSegments 高度分段数(默认值为1)</li>
<li>depthSegments 宽度分段数(默认值为1)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CubeGeometry</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/img/threeSegment1.PNG" alt="" /></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CubeGeometry</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>)  </span><br></pre></td></tr></table></figure>
<p><img src="/img/threeSegment2.PNG" alt="" /></p>
<h3 id="球"><a class="markdownIt-Anchor" href="#球"></a> 球</h3>
<p>new THREE.SphereGeometry(radius, segmentsWidth, segmentsHeight, phiStart, phiLength, thetaStart, thetaLength)</p>
<ul>
<li>radius 半径</li>
<li>segmentsWidth 经度分隔数(横着)</li>
<li>segmentsHeight 维度分隔数(竖着)</li>
<li>phiStart 初始经度</li>
<li>phiLength  经度跨度</li>
<li>thetaStart 初始维度</li>
<li>thetaLength 维度跨度</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">SphereGeometry</span>(<span class="number">1.5</span>, <span class="number">4</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="sph-2" style="width:200px;height:200px"></canvas></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">SphereGeometry</span>(<span class="number">1.5</span>, <span class="number">4</span>, <span class="number">4</span>,  <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>, <span class="title class_">Math</span>.<span class="property">PI</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="sph-3" style="width:200px;height:200px"></canvas></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">SphereGeometry</span>(<span class="number">1.5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>, <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>, <span class="title class_">Math</span>.<span class="property">PI</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="sph-4" style="width:200px;height:200px"></canvas></p>
<script>creExp(".sph-2",new THREE.SphereGeometry(1.5, 4, 4));</script>
<script>creExp(".sph-3",new THREE.SphereGeometry(1.5, 4, 4,  Math.PI / 2, Math.PI));</script>
<script>creExp(".sph-4",new THREE.SphereGeometry(1.5, 4, 4, 0, Math.PI * 2,Math.PI / 2, Math.PI));</script>
<p>注 Math.PI属性是一个固定值,其值为元周长与直径比(π)</p>
<h3 id="柱体"><a class="markdownIt-Anchor" href="#柱体"></a> 柱体</h3>
<p>new THREE.CylinderGeometry(radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded)</p>
<ul>
<li>radiusTop 顶部半径</li>
<li>radiusBottom 底部半径</li>
<li>height 高度</li>
<li>radialSegments  元周分段数,默认值为8</li>
<li>heightSegments 高度分段数,默认值为1</li>
<li>openEnded 布尔值,是否开放顶面和底面</li>
<li>thetaStart  初始角度</li>
<li>thetaLength 中心角度,默认值 Math.PI * 2</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CylinderGeometry</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="cyi-1"></canvas></p>
<script>creExp(".cyi-1", new THREE.CylinderGeometry(1, 2));</script>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CylinderGeometry</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="cyi-2"></canvas></p>
<script>creExp(".cyi-2", new THREE.CylinderGeometry(1, 1, 2, 8, 2, true));</script>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CylinderGeometry</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="literal">false</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="cyi-3"></canvas></p>
<script>creExp(".cyi-3", new THREE.CylinderGeometry(1, 1, 2, 8, 2, false, 0, Math.PI));</script>
<h3 id="正四面体"><a class="markdownIt-Anchor" href="#正四面体"></a> 正四面体</h3>
<p>new THREE.TetrahedronGeometry(radius, detail)</p>
<ul>
<li>radius 半径</li>
<li>detail</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TetrahedronGeometry</span>(<span class="number">1.5</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="cyl-1"></canvas></p>
<script>creExp(".cyl-1", new THREE.TetrahedronGeometry(1.5))</script>
<p>正八面体 THREE.OctahedronGeometry(radius, detail)<br />
正十二面体 THREE.DodecahedronGeometry(radius, detail)<br />
正二十面体 THREE.IcosahedronGeometry(radius, detail)</p>
<h3 id="圆环-2"><a class="markdownIt-Anchor" href="#圆环-2"></a> 圆环</h3>
<p>new THREE.TorusGeometry(radius, tube, radialSegments, tubularSegments, arc)</p>
<ul>
<li>radius 外半径</li>
<li>tube 圆环厚度(外半径-内半径),默认值0.4</li>
<li>radialSegments 默认值8</li>
<li>tubularSegments 默认值6</li>
<li>arc 中心角度,默认值Math.PI * 2</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TorusGeometry</span>(<span class="number">1.5</span>, <span class="number">0.4</span>, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="tet-2"></canvas></p>
<script>creExp(".tet-2", new THREE.TorusGeometry(1.5, 0.4, 20))</script>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TorusGeometry</span>(<span class="number">1.5</span>, <span class="number">0.4</span>, <span class="number">8</span>, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<p><canvas class="tet-3"></canvas></p>
<script>creExp(".tet-3", new THREE.TorusGeometry(1.5, 0.4, 8, 20))</script>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TorusGeometry</span>(<span class="number">1.5</span>, <span class="number">0.4</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="title class_">Math</span>.<span class="property">PI</span> )</span><br></pre></td></tr></table></figure>
<p><canvas class="tet-4"></canvas></p>
<script>creExp(".tet-4", new THREE.TorusGeometry(1.5, 0.4, 8, 6, Math.PI ))</script>
<h3 id="字体"><a class="markdownIt-Anchor" href="#字体"></a> 字体</h3>
<p>载入字体前,需用Facetype.js把字体转换成转换成json格式,避免乱码<br />
<a target="_blank" rel="noopener" href="https://github.com/gero3/facetype.js">Facetype.js</a></p>
<p>new THREE.FontLoader( parameters )</p>
<ul>
<li>text 文本</li>
<li>parameters 参数
<ul>
<li>font 字体,默认值为'helvetiker'</li>
<li>size 字号,默认值 100</li>
<li>height 字体厚度,默认值 50</li>
<li>curveSegments 曲线分段数,默认值 12</li>
<li>bevelEnabled — 布尔值,是否在字体边缘添加斜面,默认值 false</li>
<li>bevelThickness —  斜面厚度,默认值10</li>
<li>bevelSize — 斜面宽度,默认值8</li>
<li>bevelSegments — 倒角分段数,默认值3</li>
</ul>
</li>
</ul>
<p><img src="/img/TextGeometry.PNG" alt="" /></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> material =  <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="number">0x555555</span>,</span><br><span class="line">    <span class="attr">wireframe</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> font = <span class="keyword">function</span>(<span class="params">font</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> mesh = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(<span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TextGeometry</span>(<span class="string">&#x27;anna&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">font</span>: font,</span><br><span class="line">        <span class="attr">size</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="number">0.4</span>,</span><br><span class="line">        <span class="attr">curveSegments</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;), material);</span><br><span class="line"></span><br><span class="line">    mesh.<span class="property">position</span>.<span class="title function_">set</span>(-<span class="number">1.5</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    scene.<span class="title function_">add</span>(mesh);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> loader = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">FontLoader</span>();</span><br><span class="line">loader.<span class="title function_">load</span>(<span class="string">&#x27;font/helvetiker_regular.typeface.json&#x27;</span>, font);</span><br></pre></td></tr></table></figure>
<h2 id="材质basicmaterial"><a class="markdownIt-Anchor" href="#材质basicmaterial"></a> 材质(BasicMaterial)</h2>
<h3 id="meshbasicmaterial-平面材质"><a class="markdownIt-Anchor" href="#meshbasicmaterial-平面材质"></a> MeshBasicMaterial 平面材质</h3>
<p>基本材质,用平面绘制图形,不受灯光影响<br />
THREE.MeshBasicMaterial( parameters )<br />
常用参数</p>
<ul>
<li>visible 是否显示图形,布尔值</li>
<li>side:THREE.FrontSide|THREE.BackSide|THREE.DoubleSide 渲染哪一面</li>
<li>transparent 是否透明 布尔值,为true时,可用opacity属性控制透明效果</li>
<li>color 颜色</li>
<li>wireframe 是否渲染线框.布尔值,默认值false</li>
</ul>
<h3 id="meshlambertmaterial-无光泽材质"><a class="markdownIt-Anchor" href="#meshlambertmaterial-无光泽材质"></a> MeshLambertMaterial 无光泽材质</h3>
<p>MeshLambertMaterial( parameters )</p>
<ul>
<li>emissive 自发光颜色,默认值 0x000000</li>
</ul>
<h3 id="meshphongmaterial-有光泽表面"><a class="markdownIt-Anchor" href="#meshphongmaterial-有光泽表面"></a> MeshPhongMaterial 有光泽表面</h3>
<p>用于渲染金属,镜面等有光泽材质<br />
THREE.MeshPhongMaterial( parameters )</p>
<ul>
<li>specular 高光颜色.16进制数,默认值 0x111111</li>
<li>shininess 高光大小.值越大,高光越小.默认值 30</li>
</ul>
<h3 id="meshnormalmaterial-法相材质"><a class="markdownIt-Anchor" href="#meshnormalmaterial-法相材质"></a> MeshNormalMaterial 法相材质</h3>
<p>THREE.MeshNormalMaterial( parameters )</p>
<p><img src="/img/MeshNormalMaterial.PNG" alt="" /></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123;<span class="attr">wireframe</span>: <span class="literal">true</span>&#125;);</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line"><span class="keyword">var</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>();</span><br><span class="line">material.<span class="property">wireframe</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<h2 id="贴图"><a class="markdownIt-Anchor" href="#贴图"></a> 贴图</h2>
<h3 id="载入贴图"><a class="markdownIt-Anchor" href="#载入贴图"></a> 载入贴图</h3>
<p>THREE.TextureLoader().load(imgPath)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> texture = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TextureLoader</span>().<span class="title function_">load</span>(<span class="string">&#x27;img/glass.jpg&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> material =  <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshLambertMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">map</span>: texture,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="载入多张贴图"><a class="markdownIt-Anchor" href="#载入多张贴图"></a> 载入多张贴图</h3>
<p>使用数组传入即可<br />
<img src="/img/texture.PNG" alt="" /></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> textureLoader = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">TextureLoader</span>();</span><br><span class="line"><span class="keyword">var</span> texture0 = textureLoader.<span class="title function_">load</span>( <span class="string">&#x27;img/number_1.jpg&#x27;</span> );</span><br><span class="line"><span class="keyword">var</span> texture1 = textureLoader.<span class="title function_">load</span>( <span class="string">&#x27;img/number_2.jpg&#x27;</span> );</span><br><span class="line"><span class="keyword">var</span> texture2 = textureLoader.<span class="title function_">load</span>( <span class="string">&#x27;img/number_3.jpg&#x27;</span> );</span><br><span class="line"><span class="keyword">var</span> texture3 = textureLoader.<span class="title function_">load</span>( <span class="string">&#x27;img/number_4.jpg&#x27;</span> );</span><br><span class="line"><span class="keyword">var</span> texture4 = textureLoader.<span class="title function_">load</span>( <span class="string">&#x27;img/number_5.jpg&#x27;</span> );</span><br><span class="line"><span class="keyword">var</span> texture5 = textureLoader.<span class="title function_">load</span>( <span class="string">&#x27;img/number_6.jpg&#x27;</span> );</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> material = [</span><br><span class="line">    <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshLambertMaterial</span>( &#123; <span class="attr">map</span>: texture0&#125; ),</span><br><span class="line">    <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshLambertMaterial</span>( &#123; <span class="attr">map</span>: texture1&#125; ),</span><br><span class="line">    <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshLambertMaterial</span>( &#123; <span class="attr">map</span>: texture2&#125; ),</span><br><span class="line">    <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshLambertMaterial</span>( &#123; <span class="attr">map</span>: texture3&#125; ),</span><br><span class="line">    <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshLambertMaterial</span>( &#123; <span class="attr">map</span>: texture4&#125; ),</span><br><span class="line">    <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshLambertMaterial</span>( &#123; <span class="attr">map</span>: texture5&#125; )</span><br><span class="line">];</span><br><span class="line"><span class="keyword">var</span> shape = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CubeGeometry</span>(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line"><span class="keyword">var</span> mesh = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(shape, material);</span><br></pre></td></tr></table></figure>
<h3 id="wraps"><a class="markdownIt-Anchor" href="#wraps"></a> wrapS</h3>
<p>定义材质如何横向排列</p>
<ul>
<li>THREE.ClampToEdgeWrapping 拉伸材质,默认值</li>
<li>THREE.RepeatWrapping 重复排列</li>
<li>THREE.MirroredRepeatWrapping 镜像式重复排列</li>
</ul>
<p><img src="/img/RepeatWrapping.PNG" alt="" /></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> texture = textureLoader.<span class="title function_">load</span>( <span class="string">&#x27;number_1.jpg&#x27;</span> );</span><br><span class="line">texture.<span class="property">wrapS</span>  = <span class="variable constant_">THREE</span>.<span class="property">RepeatWrapping</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/img/MirroredRepeatWrapping.PNG" alt="" /></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> texture = textureLoader.<span class="title function_">load</span>( <span class="string">&#x27;number_1.jpg&#x27;</span> );</span><br><span class="line">texture.<span class="property">wrapS</span>  = <span class="variable constant_">THREE</span>.<span class="property">MirroredRepeatWrapping</span>;</span><br></pre></td></tr></table></figure>
<h3 id="wrapt"><a class="markdownIt-Anchor" href="#wrapt"></a> wrapT</h3>
<p>定义材质如何纵向排列<br />
参数同上wrapS</p>
<p>可用 repeat.set()方法控制重复次数</p>
<pre><code>//横向重复3次,纵向重复4次
texture.repeat.set(3,4)
</code></pre>
<h2 id="mesh-网格"><a class="markdownIt-Anchor" href="#mesh-网格"></a> Mesh 网格</h2>
<p>new Mesh(geometry, material)</p>
<ul>
<li>geometry 几何图形,默认值为new BufferGeometry</li>
<li>material 材质,默认值为MeshBasicMaterial(随机颜色)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shape = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CubeGeometry</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshLambertMaterial</span>(&#123;<span class="attr">color</span>:<span class="number">0xffffff</span>&#125;);</span><br><span class="line"><span class="keyword">var</span> mesh = <span class="keyword">var</span> <span class="title class_">Mesh</span>(shape, material)</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line">mesh.<span class="property">material</span> = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshNormalMaterial</span>(&#123;<span class="attr">color</span>:<span class="number">0xffffff</span>&#125;);</span><br><span class="line">mesh.<span class="property">shape</span> = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">SphereGeometry</span>(<span class="number">1</span>,<span class="number">36</span>,<span class="number">36</span>)</span><br></pre></td></tr></table></figure>
<h3 id="meshposition"><a class="markdownIt-Anchor" href="#meshposition"></a> mesh.position</h3>
<p>修改坐标<br />
mesh.position.set(x, y, z)<br />
mesh.position.x<br />
mesh.position.y<br />
mesh.position.z</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mesh = <span class="keyword">var</span> <span class="title class_">Mesh</span>();</span><br><span class="line">mesh.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">// 修改单个坐标</span></span><br><span class="line">mesh.<span class="property">position</span>.<span class="property">x</span> = <span class="number">1</span>;</span><br><span class="line">mesh.<span class="property">position</span>.<span class="property">y</span> = <span class="number">1</span>;</span><br><span class="line">mesh.<span class="property">position</span>.<span class="property">z</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h3 id="scale"><a class="markdownIt-Anchor" href="#scale"></a> scale</h3>
<p>缩放</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mesh = <span class="keyword">var</span> <span class="title class_">Mesh</span>();</span><br><span class="line">mesh.<span class="property">scale</span>.<span class="title function_">set</span>(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line">mesh.<span class="property">scale</span>.<span class="property">x</span> = <span class="number">2</span>;</span><br><span class="line">mesh.<span class="property">scale</span>.<span class="property">y</span> = <span class="number">2</span>;</span><br><span class="line">mesh.<span class="property">scale</span>.<span class="property">z</span> = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<h3 id="rotation"><a class="markdownIt-Anchor" href="#rotation"></a> rotation</h3>
<p>旋转</p>
<h2 id="动画"><a class="markdownIt-Anchor" href="#动画"></a> 动画</h2>
<h3 id="windowsetinterval"><a class="markdownIt-Anchor" href="#windowsetinterval"></a> window.setInterval()</h3>
<h3 id="windowrequestanimationframe"><a class="markdownIt-Anchor" href="#windowrequestanimationframe"></a> window.requestAnimationFrame()</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(animate);</span><br><span class="line">    renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">animate</span>();</span><br></pre></td></tr></table></figure>
<h2 id="辅助插件"><a class="markdownIt-Anchor" href="#辅助插件"></a> 辅助插件</h2>
<h3 id="orbitcontrolsjs-自由视角"><a class="markdownIt-Anchor" href="#orbitcontrolsjs-自由视角"></a> OrbitControls.js 自由视角</h3>
<p>OrbitControls构造函数会导致camera.lookAt失效<br />
应该先调用OrbitControls构造函数,再设置相机指向<br />
<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/10325095/threejs-camera-lookat-has-no-effect-is-there-something-im-doing-wrong">参考</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> controls = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">OrbitControls</span>(camera); </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>();</span><br><span class="line">    camera.<span class="title function_">lookAt</span>(<span class="number">100</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="statjs-显示fps"><a class="markdownIt-Anchor" href="#statjs-显示fps"></a> stat.js 显示FPS</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stats = <span class="keyword">new</span> <span class="title class_">Stats</span>();</span><br><span class="line">stats.<span class="title function_">showPanel</span>(<span class="number">1</span>); <span class="comment">// 0: fps, 1: ms, 2: mb, 3+: custom</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>( stats.<span class="property">dom</span> );</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//每一帧开始</span></span><br><span class="line">    stats.<span class="title function_">begin</span>();</span><br><span class="line">    <span class="comment">// monitored code goes here</span></span><br><span class="line">    <span class="comment">//每一帧结束</span></span><br><span class="line">    stats.<span class="title function_">end</span>();</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>( animate );</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>( animate );</span><br></pre></td></tr></table></figure>
<p>也可以把stat.js作为书签使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">javascript</span>:(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> script=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);script.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> stats=<span class="keyword">new</span> <span class="title class_">Stats</span>();<span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(stats.<span class="property">dom</span>);<span class="title function_">requestAnimationFrame</span>(<span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params"></span>)&#123;stats.<span class="title function_">update</span>();<span class="title function_">requestAnimationFrame</span>(loop)&#125;);&#125;;script.<span class="property">src</span>=<span class="string">&#x27;//rawgit.com/mrdoob/stats.js/master/build/stats.min.js&#x27;</span>;<span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(script);&#125;)()</span><br></pre></td></tr></table></figure>
<h3 id="reflectorjs-镜面反射"><a class="markdownIt-Anchor" href="#reflectorjs-镜面反射"></a> Reflector.js 镜面反射</h3>
<p>创建镜子之类的物体</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sphereGeom = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">CircleBufferGeometry</span>( <span class="number">40</span>, <span class="number">64</span> );</span><br><span class="line"><span class="keyword">var</span> groundMirror = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Reflector</span>( sphereGeom, &#123;</span><br><span class="line">    <span class="attr">clipBias</span>: <span class="number">0.003</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="number">0x777777</span>,</span><br><span class="line">    <span class="attr">recursion</span>: <span class="number">1</span>,</span><br><span class="line">&#125; );</span><br><span class="line">scene.<span class="title function_">add</span>(groundMirror);</span><br></pre></td></tr></table></figure>
<h2 id="附录"><a class="markdownIt-Anchor" href="#附录"></a> 附录</h2>
<h3 id="已不被赞成使用的函数及代替品"><a class="markdownIt-Anchor" href="#已不被赞成使用的函数及代替品"></a> 已不被赞成使用的函数及代替品</h3>
<p>THREE.MeshFaceMaterial  &gt; []<br />
THREE.ImageUtils.loadTexture() &gt;  THREE.TextureLoader()<br />
.shadowMapEnabled &gt; .shadowMap.enabled</p>
<h3 id="已不赞成使用被移除的插件及代替品"><a class="markdownIt-Anchor" href="#已不赞成使用被移除的插件及代替品"></a> 已不赞成使用/被移除的插件及代替品</h3>
<p>OBJMTLLoader.js &gt; OBJLoader.js</p>

      </div>
    </article>
  </div>
  <!-- pagination -->
  
    <nav class="pagination">
      
        <a class="prev" href="/article/%E5%88%A9%E7%94%A8Three.js%E5%AE%9E%E7%8E%B0%E7%B2%92%E5%AD%90%E7%B3%BB%E7%BB%9F/">&lt;  利用Three.js实现粒子系统</a>
      
      
        <a class="next" href="/article/html2canvas/">html2canvas  &gt;</a>
      
    </nav>    
  
  <!-- pagination end -->
</div>






    </main>

    <!-- search -->
     
    
    <script src="/js/main.js"></script>
     
  </body>
</html>
